version: "3"
services:

    server:
        build:
            context: ./src
            dockerfile: Dockerfile
        container_name: prodex-webhook
        command: bash -c "python server.py"
        volumes:
            - ./src:/usr/src/prodex-webhook/
        ports:
            - 5000:5000
        environment:
            - DEBUG=1

    #     depends_on:
    #         - redis

    # celery:
    #     build: ./src
    #     command: celery -A prodex worker -l INFO
    #     volumes:
    #         - ./backend:/usr/src/prodex-webhook/
    #     environment:
    #         - DEBUG=1
    #         - CELERY_BROKER=redis://redis:6379/0
    #         - CELERY_BACKEND=redis://redis:6379/0
    #     depends_on:
    #         - backend
    #         - redis
    # redis:
    #     image: redis:alpine

# volumes:
#     node-modules: null
